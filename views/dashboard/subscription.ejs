<%- include('../partials/header') %>

<section>
  <h1>Packages</h1>
  <p>Optional plans for operations. Posting usage is controlled by token balance.</p>
</section>

<section class="grid two-col">
  <article class="card">
    <h2>Current Plan (Optional)</h2>
    <p><strong>Token Balance:</strong> <%= tokenBalance %></p>
    <% if (!subscription) { %>
      <p>No active plan assigned. You can still operate with tokens.</p>
    <% } else { %>
      <p><strong><%= subscription.plan_name %></strong></p>
      <p>$<%= Number(subscription.price_usd).toFixed(0) %> / <%= subscription.billing_cycle %></p>
      <p>Max jobs: <%= subscription.max_jobs %></p>
      <p>Status: <%= subscription.status %></p>
      <p>Start: <%= subscription.starts_at %></p>
      <p>End: <%= subscription.ends_at || 'No end date' %></p>
    <% } %>
  </article>

  <article class="card">
    <h2>Available Packages</h2>
    <ul class="plan-list">
      <% plans.forEach((plan) => { %>
        <li>
          <strong><%= plan.name %></strong>
          <span>$<%= Number(plan.price_usd).toFixed(0) %>/<%= plan.billing_cycle %></span>
          <small><%= plan.description || '' %></small>
          <small><%= plan.max_jobs %> active jobs</small>
        </li>
      <% }) %>
    </ul>
  </article>
</section>

<%- include('../partials/footer') %>
